name: build gatsby
on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - uses: enriikke/gatsby-gh-pages-action@v2
#         with:
#           node-version: '16.x'
#       - name: Cache node_modules
#         uses: actions/cache@v1
#         with:
#           path: node_modules
#           key: ${{runner.OS}}-build-${{hashFiles('**/yarn.lock')}}
#           restore-keys: |
#             ${{ runner.OS }}-build-${{ runner.OS }}-
#       - name: Install dependencies
#         run: yarn install --prod --pure-lockfile
#       - name: Build
#         run: yarn build --prefix-paths
#         env:
#           NODE_ENV: production
#       - uses: peaceiris/actions-gh-pages@v3
        with:
          personal_token: ${{ secrets.ACCESS_TOKEN }}
          publish_dir: ./public
          publish_branch : depoly
